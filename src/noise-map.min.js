!function(t,e){"object"==typeof exports?module.exports=e():"function"==typeof define&&define.amd?define(e):t.NoiseMap=e()}(this,function(){"use strict";var r=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],g=.5*(Math.sqrt(3)-1),x=(3-Math.sqrt(3))/6,_=[],v=[{x:1,y:1},{x:-1,y:1},{x:1,y:-1},{x:-1,y:-1},{x:Math.SQRT1_2,y:Math.SQRT1_2},{x:-Math.SQRT1_2,y:Math.SQRT1_2},{x:Math.SQRT1_2,y:-Math.SQRT1_2},{x:-Math.SQRT1_2,y:-Math.SQRT1_2}];function s(t,e){var i,r=Math.floor(t),a=Math.floor(e),n=t-r,o=e-a,h=(i=v[7&_[(r&=255)+_[a&=255]]]).x*n+i.y*o,s=(i=v[7&_[r+_[a+1]]]).x*n+i.y*(o-1),f=(i=v[7&_[r+1+_[a]]]).x*(n-1)+i.y*o,l=(i=v[7&_[r+1+_[a+1]]]).x*(n-1)+i.y*(o-1),u=c(n);return d(c(o),d(u,h,f),d(u,s,l))}function f(t,e){var i,r,a=(t+e)*g,n=Math.floor(t+a),o=Math.floor(e+a),h=t-n+(n+o)*x,s=e-o+(n+o)*x;r=s<h?(i=1,0):(i=0,1);var f=h-i+x,l=s-r+x,u=h-1+2*x,c=s-1+2*x,d=v[7&_[(n&=255)+_[o&=255]]],M=v[7&_[n+i+_[o+r]]],y=v[7&_[n+1+_[o+1]]],p=0;return 70*(((p=.5-h*h-s*s)<0?0:(p*=p)*p*(d.x*h+d.y*s))+((p=.5-f*f-l*l)<0?0:(p*=p)*p*(M.x*f+M.y*l))+((p=.5-u*u-c*c)<0?0:(p*=p)*p*(y.x*u+y.y*c)))}function c(t){return t*t*t*(t*(6*t-15)+10)}function d(t,e,i){return(1-t)*e+t*i}function l(t,e,i,r,a){return r+(a-r)*(t-e)/(i-e)}function MapGenerator(t,e){this._seed=null,this._config={type:"simplex",amplitude:1,frequency:.5,amplitudeCoef:.5,frequencyCoef:.5,generateSeed:!1},this.setSeed(t),this.setConfig(e)}function HeightMap(t,e,i){this.width=t,this.height=e,this.data=void 0!==i?i:new Array(t*e)}MapGenerator.prototype={setSeed:function(t){var e=parseInt(t)||Math.random();e<0&&(e*=-1),0<e&&e<1&&(e*=65536),e<256&&(e|=e<<8),this._seed=e,function(t){_=new Array(512);for(var e=0,i=0;i<256;i++)e=1&i?r[i]^255&t:r[i]^t>>8&255,_[i]=_[i+256]=e}(this._seed)},setConfig:function(t){t=void 0!==t?t:{};for(var e=Object.keys(this._config),i=0;i<e.length;i++)t.hasOwnProperty(e[i])&&(this._config[e[i]]=t[e[i]])},createMap:function(t,e,i){void 0!==i&&this.setConfig(i);var r=this._config;r.generateSeed&&this.setSeed();var a="perlin"==r.type?s:f,n=function(t,e,i,r,a,n,o){var h=new Array(t*e),s=0,f=99999,l=-99999,u=0,c=0,d=0,M=0,y=0,p=0;for(M=0;M<t;M++)for(y=0;y<e;y++){for(u=i,c=a,p=d=0;p<5;p++)s=o(M/(t*c),y/(e*c)),f=Math.min(s,f),l=Math.max(s,l),d+=u*s,u*=r,c*=n;h[M+y*t]=d}return h}(t,e,r.amplitude,r.amplitudeCoef,r.frequency,r.frequencyCoef,a),o=Math.min.apply(null,n),h=Math.max.apply(null,n);return new HeightMap(t,e,n=n.map(function(t){return l(t,o,h,0,1)}))}},HeightMap.prototype={get:function(t,e){return 0<=e&&e<this.height&&0<=t&&t<this.width?this.data[e*this.width+t]:null},set:function(t,e,i){0<=e&&e<this.height&&0<=t&&t<this.width&&(this.data[e*this.width+t]=i)},scaleValues:function(t){var e=Math.max(Math.min(t,2),.5);if(1!=e)for(var i=0;i<this.data.length;i++)this.data[i]=Math.pow(this.data[i],e)},stepValues:function(t){var e=Math.max(Math.min(t,100),1);if(1<e)for(var i=0;i<this.data.length;i++)this.data[i]=Math.round(this.data[i]*e)/e},inverseValues:function(){for(var t=0;t<this.data.length;t++)this.data[t]=1-this.data[t]},draw:function(t,e,i,r,a){for(var n=Math.ceil(e/this.width),o=Math.ceil(i/this.height),h=new u(r),s=!!a,f=0;f<this.width;f++)for(var l=0;l<this.height;l++)t.fillStyle=h.getColor(this.get(f,l)),t.fillRect(f*n,l*o,n,o),s&&(t.fillStyle=this.getShadowColor(f,l),t.fillRect(f*n,l*o,n,o))},getShadowColor:function(t,e){var i=0,r=this.get(t,e);return.5<=r&&(this.get(t-1,e)>r&&(i+=.01),this.get(t,e-1)>r&&(i+=.02),this.get(t-1,e-1)>r&&(i+=.03)),"rgba(0,0,0,"+String(i)+")"}};var e={R:[[0,2],[63,9],[126,17],[127,69],[128,42],[191,115],[225,153],[250,179],[255,255]],G:[[0,43],[63,62],[126,82],[127,108],[128,102],[191,128],[225,143],[250,179],[255,255]],B:[[0,68],[63,92],[126,112],[127,118],[128,41],[191,77],[225,92],[250,179],[255,255]]},i={R:[[0,94],[126,66],[127,77],[128,86],[160,207],[191,254],[223,247],[255,182]],G:[[0,79],[126,138],[127,163],[128,173],[160,236],[191,235],[223,137],[255,28]],B:[[0,162],[126,181],[127,177],[128,174],[160,158],[191,159],[223,81],[255,71]]},a={R:[[0,10],[126,73],[127,109],[128,29],[160,107],[191,254],[223,207],[255,67]],G:[[0,0],[126,186],[127,219],[128,160],[160,138],[191,245],[223,131],[255,40]],B:[[0,79],[126,184],[127,184],[128,108],[160,44],[191,176],[223,55],[255,19]]},n={R:[[0,0],[255,255]],G:[[0,0],[255,255]],B:[[0,0],[255,255]]},o={REALISTIC:0,HEATMAP:1,GEOLOGIC:2,GRAY:3};function u(t){switch(this._colorMatrix=null,t){case o.REALISTIC:this._colorMatrix=e;break;case o.HEATMAP:this._colorMatrix=i;break;case o.GEOLOGIC:this._colorMatrix=a;break;case o.GRAY:default:this._colorMatrix=n}}return u.prototype={getColor:function(t){return"rgb("+this._interpolate(255*t,this._colorMatrix.R)+","+this._interpolate(255*t,this._colorMatrix.G)+","+this._interpolate(255*t,this._colorMatrix.B)+")"},_interpolate:function(t,e){for(var i=0;i<e.length;i++){if(t==e[i][0])return e[i][1];if(t<e[i][0]){var r=e[i-1],a=e[i];return Math.floor(l(t,r[0],a[0],r[1],a[1]))}}return array[array.length-1][1]}},{MapGenerator:MapGenerator,HeightMap:HeightMap,STYLE:o,Colorizer:u}});